<app-menu></app-menu>


<div class="container">
    <br>
    <form [formGroup]="filterForm" class="form-inline" (ngSubmit)="onSubmit()">

        <select formControlName="roundNumbersControl" class="form-control">
          <option [value]="round" *ngFor="let round of roundNumbers">{{round}}</option>
        </select>

        <select formControlName="teamsControl" class="form-control">
            <option [value]="team.name" *ngFor="let team of teams">{{team.name}}</option>
        </select>

        <select formControlName="checkedControl" class="form-control">
            <option [value]="check" *ngFor="let check of checked">{{check}}</option>
        </select>

        <button type="submit" class="btn btn-primary">Filter</button>

    </form>

    <div *ngFor="let round of filteredList; let i = index" [attr.data-index]="i">
        <br>
        <table *ngIf="round.score" class="table table-striped headerTotal">
            <thead>
                <tr>
                    <th scope="col" class="center">Ronde: {{round.number}}</th>
                    <th scope="col" class="center">Ploeg: {{round.team}}</th>
                    <th scope="col" class="center">Deze ronde is verbeterd</th>
                    <th scope="col" class="center">Score: {{round.score}}</th>
                </tr>
            </thead>
        </table>
        <table *ngIf="!round.score" class="table table-striped headerTotalTwo">
            <thead>
                <tr>
                    <th scope="col" class="center">Ronde: {{round.number}}</th>
                    <th scope="col" class="center">Ploeg: {{round.team}}</th>
                    <th scope="col" class="center">Deze ronde is nog niet verbeterd</th>
                    <th scope="col" class="center"> {{round.score}}</th>
                </tr>
            </thead>
        </table>
        <table class="table table-striped scoretable">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Antwoord</th>
                    <th scope="col">Verbetering</th>
                    <th scope="col" class="checkboxTD">Correct</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let answer of round.answers; let j = index" [attr.data-index]="j">
                    <th scope="row">{{j+1}}</th>
                    <td>{{answer.answer}}</td>
                    <td>{{answer.corrections}}</td>
                    <td class="checkboxTD"><input type="checkbox" class="form-check-input" id="exampleCheck1" [(ngModel)]="answer.autoCorrect"
                        (change)="recalculateTotal(i)"></td>
                </tr>
                <tr>
                    <th scope="row">Totaal</th>
                    <th colspan="2" class="right"><button type="submit" class="btn btn-primary" (click)="setScore(i)">Bevestig</button></th>
                    <th><input [(ngModel)]="round.autoScore"></th>
                </tr>
            </tbody>
        </table>
    </div>
</div>
